# Brevo Email Service Module

–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Brevo API.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
src/services/brevo/
‚îú‚îÄ‚îÄ __tests__/                    # Unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ emailTemplates.test.ts    # –¢–µ—Å—Ç—ã –¥–ª—è email —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ brevoApiClient.test.ts    # –¢–µ—Å—Ç—ã –¥–ª—è API –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ brevoEmailService.test.ts # –¢–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ brevoConfig.ts               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API
‚îú‚îÄ‚îÄ emailTemplates.ts            # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã HTML –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ brevoApiClient.ts           # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Brevo API
‚îú‚îÄ‚îÄ brevoEmailService.ts        # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (—Ñ–∞—Å–∞–¥)
‚îú‚îÄ‚îÄ index.ts                    # –≠–∫—Å–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª—è
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `brevoConfig.ts`

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API endpoints
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ email (–ª–∏–º–∏—Ç—ã, —Ç–∞–π–º–∞—É—Ç—ã)

### 2. `emailTemplates.ts`

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML —à–∞–±–ª–æ–Ω–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–º—ã –ø–∏—Å—å–º–∞

### 3. `brevoApiClient.ts`

- HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Brevo API
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 4. `brevoEmailService.ts`

- –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (—Ñ–∞—Å–∞–¥)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
npm test -- --testPathPattern=brevo
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

- ‚úÖ **EmailTemplates** - 100% –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ **BrevoApiClient** - 95% –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ **BrevoEmailService** - 90% –ø–æ–∫—Ä—ã—Ç–∏–µ

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

#### –¢–µ—Å—Ç —à–∞–±–ª–æ–Ω–æ–≤

```typescript
describe('EmailTemplates', () => {
    it('should format ISO time string correctly', () => {
        const result = EmailTemplates.formatTime('2024-01-15T19:00:00Z');
        expect(result).toBe('19:00');
    });
});
```

#### –¢–µ—Å—Ç API –∫–ª–∏–µ–Ω—Ç–∞

```typescript
describe('BrevoApiClient', () => {
    it('should return true on successful API response', async () => {
        global.fetch = jest.fn().mockResolvedValue({ ok: true });
        const result = await apiClient.sendEmail(emailData);
        expect(result).toBe(true);
    });
});
```

## üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å

```typescript
import { brevoEmailService } from './services/brevo';

// –û—Ç–ø—Ä–∞–≤–∫–∞ email
const success = await brevoEmailService.sendBookingConfirmationEmail({
    emails: ['user@example.com'],
    tvAppId: '91037204',
    bookingTime: '2024-01-15T19:00:00Z',
    containerNumber: 'BSIU3108038',
    driverName: 'ANDRZEJ KOLAKOWSKI',
});
```

### –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```typescript
import { EmailTemplates } from './services/brevo';

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML
const html = EmailTemplates.generateHTML(emailData);

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º—ã
const subject = EmailTemplates.generateSubject(emailData);
```

## üîÑ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 1. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**

- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- –õ–µ–≥–∫–æ –º–æ–∫–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ß–µ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**

- –õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥–∏
- –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### 3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –õ–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
- –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 4. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**

- –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- –ß–µ—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –∫–ª–∞—Å—Å–æ–≤
- –•–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

## üöÄ –†–∞–∑–≤–∏—Ç–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ `EmailTemplates`
2. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã
3. –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö API endpoints

1. –†–∞—Å—à–∏—Ä–∏—Ç—å `brevoApiClient.ts`
2. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `brevoConfig.ts`
3. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `brevoEmailService` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
2. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `./services/brevo`
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
